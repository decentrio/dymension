version: "4"

services:
  dymension1:
    image: dymension:local
    build:
      context: ../..
      dockerfile: ./tests/localdymension/Dockerfile
      args:
        RUNNER_IMAGE: alpine:3.16
        GO_VERSION: "1.19"
    volumes:
      - ./export.json:/dymension/export.json
      - ./transform.py:/dymension/transform.py
      - ./v1/:/dymension/localnet/v1/
      - ./genesis.json:/dymension/localnet/v1/config/genesis.json
    command: dymd start --home v1 --x-crisis-skip-assert-invariants
    ports:
      - 2101:26657
      - 2104:1317
      - 2102:9090
      - 2103:9091
      - 2105:6060
      - 2106:9092
      - 2100:26656

  dymension2:
    image: dymension:local
    build:
      context: ../..
      dockerfile: ./tests/localdymension/Dockerfile
      args:
        RUNNER_IMAGE: alpine:3.16
        GO_VERSION: "1.19"
    volumes:
      - ./v2/:/dymension/localnet/v2/
      - ./genesis.json:/dymension/localnet/v2/config/genesis.json
      - ./export.json:/dymension/export.json
      - ./transform.py:/dymension/transform.py
    command: dymd start --home v2 --x-crisis-skip-assert-invariants
    ports:
      - 2201:26657
      - 2204:1317
      - 2202:9090
      - 2203:9091
      - 2205:6060
      - 2206:9092
      - 2200:26656

  dymension3:
    image: dymension:local
    build:
      context: ../..
      dockerfile: ./tests/localdymension/Dockerfile
      args:
        RUNNER_IMAGE: alpine:3.16
        GO_VERSION: "1.19"
    volumes:
      - ./export.json:/dymension/export.json
      - ./v3/:/dymension/localnet/v3/
      - ./genesis.json:/dymension/localnet/v3/config/genesis.json
      - ./transform.py:/dymension/transform.py
    command: dymd start --home v3 --x-crisis-skip-assert-invariants
    ports:
      - 2301:26657
      - 2304:1317
      - 2302:9090
      - 2303:9091
      - 2305:6060
      - 2306:9092
      - 2300:26656